# Heady Systems Upstream Server Configurations
# Backend services that Nginx will proxy to

# HeadySystems commercial backend
upstream headysystems_backend {
    server 127.0.0.1:8000;
    keepalive 32;
}

# HeadySystems web application
upstream headysystems_app {
    server 127.0.0.1:3000;
    keepalive 32;
}

# HeadySystems admin dashboard
upstream headysystems_admin {
    server 127.0.0.1:3001;
    keepalive 16;
}

# HeadyConnection nonprofit backend
upstream headyconnection_backend {
    server 127.0.0.1:8001;
    keepalive 32;
}

# HeadyConnection nonprofit application
upstream headyconnection_app {
    server 127.0.0.1:3002;
    keepalive 32;
}

# HeadyBuddy program backend
upstream headybuddy_backend {
    server 127.0.0.1:4000;
    keepalive 32;
}

# Development environment backends
upstream dev_backend {
    server 127.0.0.1:8000;
    keepalive 16;
}

upstream staging_backend {
    server staging-backend:8000;
    keepalive 32;
}

# API-specific upstreams with load balancing
upstream api_headysystems {
    server 127.0.0.1:8000 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

upstream api_headyconnection {
    server 127.0.0.1:8001 max_fails=3 fail_timeout=30s;
    keepalive 32;
}

# WebSocket upstreams for real-time features
upstream websocket_headysystems {
    server 127.0.0.1:3000;
}

upstream websocket_headyconnection {
    server 127.0.0.1:3002;
}

# Static file serving (if using separate file server)
upstream static_files {
    server 127.0.0.1:9000;
    keepalive 64;
}
